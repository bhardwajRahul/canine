<div class="space-y-4" data-controller="helm-repo-browser">
  <div class="form-group">
    <%= form.label "Helm Repository URL" %>
    <%= form.text_field "custom_repo_url",
        class: "input input-bordered w-full max-w-md font-mono text-sm",
        placeholder: "e.g., https://czhu12.github.io/openclaw-helm",
        data: {
          'helm-repo-browser-target': 'repoUrl',
          'action': 'input->helm-repo-browser#onInput'
        } %>
    <label class="label">
      <span class="label-text-alt">Enter a Helm chart repository URL</span>
    </label>
    <div data-helm-repo-browser-target="loading" class="hidden">
      <div class="flex items-center gap-2 text-sm text-gray-500 mt-2">
        <span class="loading loading-spinner loading-sm"></span>
        Fetching available charts...
      </div>
    </div>
    <div data-helm-repo-browser-target="error" class="hidden">
      <div class="alert alert-error text-sm mt-2">
        <span data-helm-repo-browser-target="errorMessage"></span>
      </div>
    </div>
  </div>

  <div data-helm-repo-browser-target="chartSelector" class="hidden space-y-4">
    <div class="form-group">
      <%= form.label "Chart" %>
      <%= form.select "custom_chart_name",
          [],
          { include_blank: "Select a chart..." },
          class: "select select-bordered w-full max-w-md",
          data: {
            'helm-repo-browser-target': 'chartSelect',
            'action': 'change->helm-repo-browser#onChartChange'
          } %>
    </div>

    <div data-helm-repo-browser-target="versionSelector" class="hidden form-group">
      <%= form.label "Version" %>
      <%= form.select "custom_chart_version",
          [],
          { include_blank: "Select a version..." },
          class: "select select-bordered w-full max-w-md",
          data: { 'helm-repo-browser-target': 'versionSelect' } %>
      <label class="label">
        <span class="label-text-alt">Select a specific version or leave blank for latest</span>
      </label>
    </div>
  </div>
</div>
